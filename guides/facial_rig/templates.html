<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/facial_rig/templates" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Template Hierarchy | Mikan Rigging Framework</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://citrus-software.github.io/mikan-docs/guides/facial_rig/templates"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Template Hierarchy | Mikan Rigging Framework"><meta data-rh="true" name="description" content="In this guide, we will build a facial rig based on skin joint deformation. This approach is generally more constrained than blendshape-based systems, but it offers significant advantages in terms of flexibility, robustness, and reusability. Historically, this type of setup has been well suited to television series production, where short schedules and"><meta data-rh="true" property="og:description" content="In this guide, we will build a facial rig based on skin joint deformation. This approach is generally more constrained than blendshape-based systems, but it offers significant advantages in terms of flexibility, robustness, and reusability. Historically, this type of setup has been well suited to television series production, where short schedules and"><link data-rh="true" rel="icon" href="/mikan-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://citrus-software.github.io/mikan-docs/guides/facial_rig/templates"><link data-rh="true" rel="alternate" href="https://citrus-software.github.io/mikan-docs/guides/facial_rig/templates" hreflang="en"><link data-rh="true" rel="alternate" href="https://citrus-software.github.io/mikan-docs/guides/facial_rig/templates" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Template Hierarchy","item":"https://citrus-software.github.io/mikan-docs/guides/facial_rig/templates"}]}</script><link rel="stylesheet" href="/mikan-docs/assets/css/styles.427a84a2.css">
<script src="/mikan-docs/assets/js/runtime~main.7e9bb022.js" defer="defer"></script>
<script src="/mikan-docs/assets/js/main.f6d8afe9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/mikan-docs/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/mikan-docs/"><div class="navbar__logo"><img src="/mikan-docs/img/logo.svg" alt="Mikan Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/mikan-docs/img/logo.svg" alt="Mikan Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Mikan</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/mikan-docs/introduction/about">Docs</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mikan-docs/introduction/about"><span title="Introduction" class="categoryLinkLabel_W154">Introduction</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mikan-docs/usage/blueprints"><span title="Usage" class="categoryLinkLabel_W154">Usage</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/mikan-docs/guides/basics"><span title="Guides" class="categoryLinkLabel_W154">Guides</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mikan-docs/guides/basics"><span title="Building a Basic Rig" class="linkLabel_WmDU">Building a Basic Rig</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/mikan-docs/guides/biped/creation-placement"><span title="Biped Character Rig" class="categoryLinkLabel_W154">Biped Character Rig</span></a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mikan-docs/guides/branches"><span title="Using Branches" class="linkLabel_WmDU">Using Branches</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/mikan-docs/guides/modifiers"><span title="Using Modifiers" class="linkLabel_WmDU">Using Modifiers</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/mikan-docs/guides/facial_rig/intro"><span title="Facial Rig" class="categoryLinkLabel_W154">Facial Rig</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mikan-docs/guides/facial_rig/intro"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/mikan-docs/guides/facial_rig/templates"><span title="Template Hierarchy" class="linkLabel_WmDU">Template Hierarchy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mikan-docs/guides/facial_rig/modifiers"><span title="Adding Modifiers" class="linkLabel_WmDU">Adding Modifiers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/mikan-docs/guides/facial_rig/facial_posing"><span title="Facial Poses and UI" class="linkLabel_WmDU">Facial Poses and UI</span></a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mikan-docs/developer/vendor"><span title="API" class="categoryLinkLabel_W154">API</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/mikan-docs/references/tpl/core/bones"><span title="Technical References" class="categoryLinkLabel_W154">Technical References</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/mikan-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Guides</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Facial Rig</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Template Hierarchy</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Template Hierarchy</h1></header>
<p>In this guide, we will build a facial rig based on skin joint deformation. This approach is generally more constrained than blendshape-based systems, but it offers significant advantages in terms of flexibility, robustness, and reusability. Historically, this type of setup has been well suited to television series production, where short schedules and
frequent model iterations require rigs that can adapt quickly.</p>
<p>Joint-based facial rigs are a proven solution. They have been used successfully on many productions and provide a solid, predictable foundation on which more complex behaviors can be layered. While they may require a bit more discipline in their construction, they tend to scale better across assets and episodes.</p>
<p>In the following chapters, we will go through the core steps required to assemble such a system using Mikan:</p>
<ul>
<li class="">Building a template module hierarchy for the facial rig and its animator interface</li>
<li class="">Adding logic through modifiers to create the actual functioning of the rig</li>
<li class="">Recording facial poses and linking them to the animator controls</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Even if you are more familiar with blendshape-based facial rigs, following this guide is still relevant. The type of system presented here is fully compatible with blendshapes, and many of the concepts apply regardless of the deformation method. While some sections may not need to be followed in detail, the parts related to pose connections and the animator
interface remain essential.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="anchoring">Anchoring<a href="#anchoring" class="hash-link" aria-label="Direct link to Anchoring" title="Direct link to Anchoring" translate="no">â€‹</a></h2>
<p>Before building any facial structure, we first need to decide where the facial rig will attach to the rest of the character. It must be anchored to an existing part of the body hierarchy so that transforms, space, and evaluation remain consistent.</p>
<p>In our case, the body template is already set up. It consists of a simple biped, augmented with clothing modules and additional features. The head controller has already been created as part of the <code>neck.legacy</code> module, and it provides a natural attachment point for the facial rig.</p>
<p>This attachment point will serve as the root of the entire facial setup.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-a-group-module-as-a-facial-root">Using a Group Module as a Facial Root<a href="#using-a-group-module-as-a-facial-root" class="hash-link" aria-label="Direct link to Using a Group Module as a Facial Root" title="Direct link to Using a Group Module as a Facial Root" translate="no">â€‹</a></h3>
<p>Rather than connecting facial modules directly to the head controller, we introduce an intermediate <code>core.group</code> module. This group acts as the root container for the facial rig.</p>
<p>Group modules serve several purposes:</p>
<ul>
<li class="">They provide a clean structural boundary for a rig subsystem</li>
<li class="">They allow all facial controllers to be selected at once</li>
<li class="">They help organize the animator interface hierarchy</li>
<li class="">They are used by animator tools that operate on controller groups (mirror, select, key...)</li>
</ul>
<p>In practice, this makes the group module an essential building block for both rig organization and animator workflow, even if it does not introduce any deformation or logic by itself.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-the-facial-group-module">Creating the Facial Group Module<a href="#creating-the-facial-group-module" class="hash-link" aria-label="Direct link to Creating the Facial Group Module" title="Direct link to Creating the Facial Group Module" translate="no">â€‹</a></h3>
<p>To set up the facial template:</p>
<ol>
<li class="">Select the head hook output of the <code>neck.legacy</code> module</li>
<li class="">Add a <code>core.group</code> module at this connection point</li>
<li class="">Name the group module <strong><code>face</code></strong></li>
</ol>
<p><img decoding="async" loading="lazy" alt="add_group" src="/mikan-docs/assets/images/add_group-d640ca424abed12881b4abd4777c7a1c.png" width="296" height="256" class="img_ev3q"></p>
<p>This face group now becomes the root of the facial rig hierarchy. All subsequent facial modules and controls will be created under this group, ensuring that the facial system remains clearly organized, easy to manage, and properly integrated with the existing body rig.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="skull-hierarchy">Skull hierarchy<a href="#skull-hierarchy" class="hash-link" aria-label="Direct link to Skull hierarchy" title="Direct link to Skull hierarchy" translate="no">â€‹</a></h2>
<p>The facial base starts with three parallel modules: <strong><code>skull</code></strong>, <strong><code>skull_mid</code></strong>, and <strong><code>skull_dn</code></strong>. These form the foundation for controlling the overall shape and motion of the face. This separation gives you the flexibility to create subtle rotations, offsets, and squash/stretch without affecting unrelated areas.</p>
<p>These modules are created using <code>core.joints</code> with the following option:</p>
<ul>
<li class=""><strong>Type</strong>: <code>transform</code>, each element is parented in a simple hierarchy and scales accumulate,</li>
</ul>
<p>Once they are placed, enable toggle shapes to edit the controller shapes, then repeat the operation for each module.</p>
<p><img decoding="async" loading="lazy" alt="tpl skull" src="/mikan-docs/assets/images/skull_tpls-7c693ea6b8b0c5ba68835151a50b3c01.png" width="1200" height="590" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="lower-face">Lower face<a href="#lower-face" class="hash-link" aria-label="Direct link to Lower face" title="Direct link to Lower face" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="jaws-hierarchy">Jaws hierarchy<a href="#jaws-hierarchy" class="hash-link" aria-label="Direct link to Jaws hierarchy" title="Direct link to Jaws hierarchy" translate="no">â€‹</a></h3>
<p>Next, we add two modules to open the mouth: <strong><code>jaw</code></strong> and <strong><code>jaw_up</code></strong>, parented under <strong><code>skull_dn</code></strong>.</p>
<p>For this, we use <code>core.bones</code> modules, which create an FK hierarchy, with the following options:</p>
<ul>
<li class=""><strong>Rotate order</strong>: <code>zxy</code> (to reduce gimbal issues)</li>
<li class=""><strong>Add pose node</strong>: <code>on</code> (to anticipate the creation of facial poses for mouth opening)</li>
</ul>
<p><img decoding="async" loading="lazy" alt="tpl jaw" src="/mikan-docs/assets/images/jaw_tpl-11384a823586d1476ce0667a861a6aed.png" width="1200" height="575" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="lips-group">Lips group<a href="#lips-group" class="hash-link" aria-label="Direct link to Lips group" title="Direct link to Lips group" translate="no">â€‹</a></h3>
<p>Under <strong><code>skull_dn</code></strong>, we then create a <strong><code>lips</code></strong> group.
Like the <code>face</code> group, this group is used to gather all mouth controllers in the animator&#x27;s right-click menu.</p>
<p>Then we add:</p>
<ul>
<li class=""><strong><code>lip_up</code></strong>, <strong><code>lip_dn</code></strong>: <code>core.joints</code>, type <code>transform</code>, to handle upper and lower lip movements.</li>
<li class="">Tweakers: <strong><code>mouth1</code></strong>, <strong><code>2</code></strong>, <strong><code>3</code></strong>, <strong><code>up</code></strong> and <strong><code>dn</code></strong>, and <strong><code>mouth4</code></strong>: <code>core.joints</code>, type <code>joint</code>, to give animators the ability to sculpt the mouth as they wish.</li>
<li class="">Second level: <strong><code>lip1</code></strong>, <strong><code>2</code></strong>, <strong><code>3</code> <code>up</code></strong> and <strong><code>dn</code></strong>, and <strong><code>lip4</code></strong>: <code>core.joints</code>, type <code>joint</code>, scale parent: <code>on</code>.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="teeth-and-tongue">Teeth and tongue<a href="#teeth-and-tongue" class="hash-link" aria-label="Direct link to Teeth and tongue" title="Direct link to Teeth and tongue" translate="no">â€‹</a></h3>
<p>Under <strong><code>jaw</code></strong>, we add the lower teeth:</p>
<ul>
<li class=""><strong><code>teeth_dn</code></strong>, <strong><code>teeth_dn_tip</code></strong>, <strong><code>teeth_bend</code></strong>, <strong><code>teeth_bend_tip</code></strong>
<ul>
<li class="">All created as <code>core.joints</code>, type <code>joint</code>, with parent scale <code>on</code>.</li>
<li class="">Flip orient enabled for the teeth bend L/R.</li>
</ul>
</li>
</ul>
<p>Then we create the tongue:</p>
<ul>
<li class=""><strong><code>tongue_base</code></strong>, type <code>transform</code>, to scale the entire tongue,</li>
<li class="">a chain <strong><code>tongue</code></strong> with <code>core.bones</code> of 3 joints for the rest of the tongue, auto-oriented, with up axis X and up dir +X.</li>
</ul>
<p>The same logic as the <strong><code>teeth_dn</code></strong> is used for the <strong><code>teeth_up</code></strong>, parented under <strong><code>jaw_up</code></strong>.</p>
<p><img decoding="async" loading="lazy" alt="tpl mouthLips" src="/mikan-docs/assets/images/lips_tpls-1b1afab3c200139570622c71aa4425ef.png" width="1200" height="531" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="lips-controllers">Lips controllers<a href="#lips-controllers" class="hash-link" aria-label="Direct link to Lips controllers" title="Direct link to Lips controllers" translate="no">â€‹</a></h3>
<p>We add a global controller <strong><code>mouth</code></strong> as well as <strong><code>lips_corner</code></strong> for the mouth corners, both using <code>core.joints</code> modules, type <code>transform</code>, with flip orient <code>on</code> for the <strong><code>lips_corner</code></strong>.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>ðŸ‘‰ They will be connected later through the modifiers to the rest of the rig.</p></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="mid-face">Mid face<a href="#mid-face" class="hash-link" aria-label="Direct link to Mid face" title="Direct link to Mid face" translate="no">â€‹</a></h2>
<p>We add a nose module and nostrils modules.</p>
<ul>
<li class=""><strong>nose</strong>: <strong>core&gt;joints</strong>, type <strong>joint</strong>, parent scale <strong>off</strong></li>
<li class=""><strong>nostrils</strong>: <strong>core&gt;joints</strong>, type <strong>joint</strong>, parent scale <strong>on</strong></li>
</ul>
<p>They stabilize the nasal area and connect the upper and lower parts of the face.</p>
<p><img decoding="async" loading="lazy" alt="tpl skukll mid" src="/mikan-docs/assets/images/skull_mid_tpl-aa9dccc40de1d5361c33092ea2b5022a.png" width="1400" height="624" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="upper-face">Upper Face<a href="#upper-face" class="hash-link" aria-label="Direct link to Upper Face" title="Direct link to Upper Face" translate="no">â€‹</a></h2>
<p>For the upper part of the face, we add:</p>
<ul>
<li class="">an <strong>Eyeroot</strong> module, <strong>core&gt;joint</strong>, type <strong>joint</strong>, with:<!-- -->
<ul>
<li class="">L/R branches,</li>
<li class="">flip orient enabled,</li>
<li class="">rotate order : ZXY.</li>
</ul>
</li>
</ul>
<p>This module allows the eye to move and scale on the face.</p>
<p>Then :</p>
<ul>
<li class=""><strong>eye_socket</strong>, core&gt;xform, placed at the eye pivot,</li>
<li class=""><strong>eye</strong>, core&gt;joint, type transform, rotate order zxy, used to control the rotation of the eye (ctrl and skin tags unchecked),</li>
<li class=""><strong>eyeball</strong>, core&gt;joint, type transform, in preparation for the look-at rig.</li>
</ul>
<p>For the eyelids:</p>
<ul>
<li class=""><strong>eyelid_up</strong> and <strong>eyelid_dn</strong>, core&gt;joints, rotate order YZX,</li>
<li class=""><strong>eyelid_bend_up</strong> and <strong>eyelid_bend_dn</strong>, core&gt;joints, type transform, rotate order YZX,</li>
<li class=""><strong>eyelid_corner_ext</strong> and <strong>eyelid_corner_int</strong>, same type as the bend modules,</li>
<li class=""><strong>eyelids_socket_up</strong> and <strong>eyelids_socket_dn</strong>, same modules as the bend ones.</li>
</ul>
<p>Ears:</p>
<ul>
<li class=""><strong>ear_base</strong>: core&gt;joint, type joint, used to slide the ear over the skull, and</li>
<li class=""><strong>ear</strong>: core&gt;bones, rotate order ZXY, auto-orient, to move the ear itself.</li>
</ul>
<p>Eyebrows:</p>
<ul>
<li class=""><strong>eyebrow_base</strong>: core&gt;joint, type transform, used to control the global movement of the eyebrow, then</li>
<li class=""><strong>eyebrow1, 2 and 3</strong>: core&gt;joints, type joint, nb : 3, unchain, flip orient, for finer control.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>ðŸ‘‰ As always: for each template module, enable parent scale when needed, flip orient for branches, and do pose when required.</p></div></div>
<p><img decoding="async" loading="lazy" alt="tpl face up" src="/mikan-docs/assets/images/eyes_tpl-3aef00084785aa94cba7284991a8a88a.png" width="1400" height="619" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="secondary-offsets">Secondary offsets<a href="#secondary-offsets" class="hash-link" aria-label="Direct link to Secondary offsets" title="Direct link to Secondary offsets" translate="no">â€‹</a></h2>
<p>Adding modules to enrich the control over the cheek area:</p>
<ul>
<li class=""><strong>core&gt;joints</strong>, type <strong>transform</strong>,</li>
<li class=""><strong>flip orient</strong> enabled,</li>
<li class=""><strong>do pose</strong> enabled (anticipation of facial poses).</li>
</ul>
<p><img decoding="async" loading="lazy" alt="tpl cheeks" src="/mikan-docs/assets/images/cheeks_tpl-bff1b1f1f2e1df48851bd094ba891759.png" width="1200" height="530" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="look-at">look at<a href="#look-at" class="hash-link" aria-label="Direct link to look at" title="Direct link to look at" translate="no">â€‹</a></h2>
<p>Next, we add a hierarchy to manage the <strong>look-at system</strong> with:</p>
<ul>
<li class="">an <strong>eyes</strong> module: core&gt;joints, type transform, skin tag unchecked, placed between the two eyes,</li>
<li class="">a <strong>look_at</strong> module, identical but placed in front of the face, controlling the gaze direction of both eyes,</li>
<li class="">a <strong>look_target</strong> module, used to control each eye individually.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="tpl look_at" src="/mikan-docs/assets/images/look_at_tpl-660920b7e11e1d15a17adf7f8595f691.png" width="1400" height="612" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="facial-interface">Facial interface<a href="#facial-interface" class="hash-link" aria-label="Direct link to Facial interface" title="Direct link to Facial interface" translate="no">â€‹</a></h2>
<p>To set up the <strong>facial interface</strong> intended for animators, we start with:</p>
<ul>
<li class="">a <strong>face_panel</strong>, created using a <strong>core&gt;xform</strong> module, with the <strong>parent = parent</strong> option so that the panel group is attached to the face group.</li>
</ul>
<p>We then create the rigger section and the animator interface.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="rigger-section">Rigger section<a href="#rigger-section" class="hash-link" aria-label="Direct link to Rigger section" title="Direct link to Rigger section" translate="no">â€‹</a></h3>
<ul>
<li class=""><strong>shp_lids</strong>: core&gt;xform module where all blink and eyelid-movement parameters will be stored.</li>
<li class=""><strong>shp_lips</strong>: module for lip-related settings.</li>
<li class=""><strong>chan_face</strong>: centralizes and manages all facial-rig connections, in the spirit of the BCS plugin, by aggregating all attributes onto a single controller.</li>
<li class=""><strong>shp_face</strong>: node on which the facial poses will be recorded.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="animator-section">Animator section<a href="#animator-section" class="hash-link" aria-label="Direct link to Animator section" title="Direct link to Animator section" translate="no">â€‹</a></h3>
<p>On the animator side, we set up the hierarchy used to build the interface:</p>
<ul>
<li class=""><strong>frame_look</strong>, a core&gt;xform module providing a 2D interface for eye animation.<!-- -->
<ul>
<li class="">a look <strong>core&gt;joints</strong> module for the global movement of both eyes,</li>
<li class="">a look_eye <strong>core&gt;joints</strong> module for the individual movement of each eye,</li>
<li class="">a loc_look <strong>core&gt;xform</strong> used to collect the movements of both c_look and c_look_eye.</li>
</ul>
</li>
<li class=""><strong>frame_lipsync</strong>, a core&gt;xform module for the 2D mouth-movement interface.<!-- -->
<ul>
<li class="">a <strong>lipsync</strong> core&gt;joints module to handle mouth opening.</li>
</ul>
</li>
<li class=""><strong>face_up</strong>, a core&gt;joints module grouping all upper-face poses (eyes, eyebrows).</li>
<li class=""><strong>face_dn</strong>, a core&gt;joints module grouping all lower-face poses (mouth, teeth, cheeks).</li>
</ul>
<p><img decoding="async" loading="lazy" alt="tpl dace UI" src="/mikan-docs/assets/images/faceUI_tpl-136070daf89660d5aa3539040cb38c54.png" width="1291" height="595" class="img_ev3q"></p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/mikan-docs/guides/facial_rig/intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/mikan-docs/guides/facial_rig/modifiers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Adding Modifiers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#anchoring" class="table-of-contents__link toc-highlight">Anchoring</a><ul><li><a href="#using-a-group-module-as-a-facial-root" class="table-of-contents__link toc-highlight">Using a Group Module as a Facial Root</a></li><li><a href="#creating-the-facial-group-module" class="table-of-contents__link toc-highlight">Creating the Facial Group Module</a></li></ul></li><li><a href="#skull-hierarchy" class="table-of-contents__link toc-highlight">Skull hierarchy</a></li><li><a href="#lower-face" class="table-of-contents__link toc-highlight">Lower face</a><ul><li><a href="#jaws-hierarchy" class="table-of-contents__link toc-highlight">Jaws hierarchy</a></li><li><a href="#lips-group" class="table-of-contents__link toc-highlight">Lips group</a></li><li><a href="#teeth-and-tongue" class="table-of-contents__link toc-highlight">Teeth and tongue</a></li><li><a href="#lips-controllers" class="table-of-contents__link toc-highlight">Lips controllers</a></li></ul></li><li><a href="#mid-face" class="table-of-contents__link toc-highlight">Mid face</a></li><li><a href="#upper-face" class="table-of-contents__link toc-highlight">Upper Face</a></li><li><a href="#secondary-offsets" class="table-of-contents__link toc-highlight">Secondary offsets</a></li><li><a href="#look-at" class="table-of-contents__link toc-highlight">look at</a></li><li><a href="#facial-interface" class="table-of-contents__link toc-highlight">Facial interface</a><ul><li><a href="#rigger-section" class="table-of-contents__link toc-highlight">Rigger section</a></li><li><a href="#animator-section" class="table-of-contents__link toc-highlight">Animator section</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/mikan-docs/introduction/about">About</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://rebrand.ly/mikan-rig-discord" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/citrus-software/mikan" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 TeamTO Technology. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>