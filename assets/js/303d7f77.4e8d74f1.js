"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[8662],{28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var l=s(96540);const i={},r=l.createContext(i);function t(e){const n=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),l.createElement(r.Provider,{value:n},e.children)}},74510:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>a,frontMatter:()=>t,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"references/tpl/quad/legacy","title":"quad.legacy","description":"Full IK/FK quadruped leg rig template module","source":"@site/docs/references/tpl/quad/legacy.md","sourceDirName":"references/tpl/quad","slug":"/references/tpl/quad/legacy","permalink":"/mikan-docs/references/tpl/quad/legacy","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"neck.legacy","permalink":"/mikan-docs/references/tpl/neck/legacy"},"next":{"title":"rig.spline","permalink":"/mikan-docs/references/tpl/rig/spline"}}');var i=s(74848),r=s(28453);const t={},o="quad.legacy",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Template Structure",id:"template-structure",level:2},{value:"Options",id:"options",level:2},{value:"Not Yet Implemented",id:"not-yet-implemented",level:3}];function h(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"quadlegacy",children:"quad.legacy"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Full IK/FK quadruped leg rig template module"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"quad.legacy"})," provides a complete IK/FK rig for a quadruped leg.\nIt shares a common module base with arm.legacy and leg.legacy, meaning their construction and logic are largely identical."]}),"\n",(0,i.jsx)(n.p,{children:"The module combines:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["A 2-joint IK chain plus an ",(0,i.jsx)(n.strong,{children:"aim constraint"})," on the 3rd joint for quadruped-style legs"]}),"\n",(0,i.jsx)(n.li,{children:"Optional clavicle support for front legs"}),"\n",(0,i.jsx)(n.li,{children:"Reverse foot setup for stable contact and foot rolls"}),"\n",(0,i.jsx)(n.li,{children:"Stretch, soft IK, and squash-volume compensation"}),"\n",(0,i.jsx)(n.li,{children:"Twist and roll joints for smooth deformation"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"template-structure",children:"Template Structure"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"root of the template"})," marks the hip position."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"The rest of the chain defines, in order:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"knee"}),"\n",(0,i.jsx)(n.li,{children:"ankle"}),"\n",(0,i.jsx)(n.li,{children:"tarsus (heel/mid-foot)"}),"\n",(0,i.jsx)(n.li,{children:"toe tip"}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["You do ",(0,i.jsx)(n.strong,{children:"not need to orient"})," the joints manually. Orientation is handled automatically during rig build."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.strong,{children:"heel joint"})," is placed separately and defines the pivot of the reverse foot system."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For forelegs, an ",(0,i.jsx)(n.strong,{children:"optional clavicle joint"})," can be added and parented backwards to the hip. This joint defines the pivot for the clavicle rig, to which the leg will be parented."]}),"\n",(0,i.jsxs)(n.p,{children:["The template hierarchy is ",(0,i.jsx)(n.strong,{children:"strict and must not be modified"}),", otherwise the build may fail or produce unexpected results."]}),"\n",(0,i.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Quadruped Type"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"quad_type"})," (",(0,i.jsx)(n.strong,{children:"enum"}),", default: ",(0,i.jsx)(n.code,{children:"down"}),")\nDefines how the quadruped leg IK is oriented. The quad leg uses a 2-joint IK chain with the third joint driven by an aim constraint pointing to the opposite end of the chain.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"down"})," : The 3rd joint (ankle_quad) aims toward the hip."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"up"})," : The 1st joint (hip) aims toward the foot."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Clavicle and Reverse Foot"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"clavicle"})," (",(0,i.jsx)(n.strong,{children:"bool"}),", default: ",(0,i.jsx)(n.code,{children:"on"}),")\nEnables the clavicle rig, using the optional clavicle template joint as the pivot for the front leg."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"reverse_lock"})," (",(0,i.jsx)(n.strong,{children:"bool"}),", default: ",(0,i.jsx)(n.code,{children:"off"}),")\nEnables the reverse foot locking system (heel / ball / toe pivots)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"bank"})," (",(0,i.jsx)(n.strong,{children:"bool"}),", default: ",(0,i.jsx)(n.code,{children:"off"}),")\nEnables lateral foot banking controls within the reverse foot system, allowing the animator to tilt the foot inward or outward."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Effector Plane & Pole Vector"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"effector_plane"})," (",(0,i.jsx)(n.strong,{children:"enum"}),", default: ",(0,i.jsx)(n.code,{children:"ground"}),")\nUp-vector mode for auto-orienting the 3 main \u201cfoot\u201d joints.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"x, y, z"})," : World up vectors"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"auto"})," : Auto up vector based on joint geometry (good for wings)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ground"})," : Forces perpendicular-to-ground orientation (useful for feet)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pv_space"})," (",(0,i.jsx)(n.strong,{children:"id"}),", default: ",(0,i.jsx)(n.code,{children:"space.cog"}),")\nGlobal parent space for the pole vector."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"pv_space_default"})," (",(0,i.jsx)(n.strong,{children:"float"}),", min: ",(0,i.jsx)(n.code,{children:"0"}),", max: ",(0,i.jsx)(n.code,{children:"1"}),", default: ",(0,i.jsx)(n.code,{children:"1"}),")\nDefault weight for pole-vector space switching."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"IK Stretching"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"default_stretch"})," (",(0,i.jsx)(n.strong,{children:"bool"}),", default: ",(0,i.jsx)(n.code,{children:"on"}),")\nEnables IK stretching at build time."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"soft_distance"})," (",(0,i.jsx)(n.strong,{children:"float"}),", min: ",(0,i.jsx)(n.code,{children:"0"}),", max: ",(0,i.jsx)(n.code,{children:"1"}),", default: ",(0,i.jsx)(n.code,{children:"0.05"}),")\nThreshold (percentage of stretch distance) where soft IK starts to blend in."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"stomp_power"})," (",(0,i.jsx)(n.strong,{children:"float"}),", min: ",(0,i.jsx)(n.code,{children:"-1"}),", max: ",(0,i.jsx)(n.code,{children:"0"}),", default: ",(0,i.jsx)(n.code,{children:"-0.5"}),")\nPower falloff used for squash/volume compensation.\n-0.5 corresponds to inverse square-root falloff."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Interpolation & Roll Joints"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"blend_joints"})," (",(0,i.jsx)(n.strong,{children:"bool"}),", default: ",(0,i.jsx)(n.code,{children:"on"}),")\nEnables roll joints at key articulations for deformation smoothing."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Twist System"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"splits_up"})," (",(0,i.jsx)(n.strong,{children:"int"}),", min: ",(0,i.jsx)(n.code,{children:"2"}),", default: ",(0,i.jsx)(n.code,{children:"3"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"splits_mid"})," (",(0,i.jsx)(n.strong,{children:"int"}),", min: ",(0,i.jsx)(n.code,{children:"2"}),", default: ",(0,i.jsx)(n.code,{children:"3"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"splits_dn"})," (",(0,i.jsx)(n.strong,{children:"int"}),", min: ",(0,i.jsx)(n.code,{children:"2"}),", default: ",(0,i.jsx)(n.code,{children:"3"}),")\nNumber of twist joints for upper, mid, and rear sections of the leg."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Space Switching"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"space_switch"})," (",(0,i.jsx)(n.strong,{children:"bool"}),", default: ",(0,i.jsx)(n.code,{children:"on"}),")\nAdds default space-switch modes to important controllers."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"not-yet-implemented",children:"Not Yet Implemented"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"aim_axis"})," (",(0,i.jsx)(n.em,{children:"enum"}),", default: ",(0,i.jsx)(n.code,{children:"-y"}),"): Not yet supported."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"up_axis"})," (",(0,i.jsx)(n.em,{children:"enum"}),", default: ",(0,i.jsx)(n.code,{children:"-x"}),"): Not yet supported."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"up_axis2"})," (",(0,i.jsx)(n.em,{children:"enum"}),", default: ",(0,i.jsx)(n.code,{children:"z"}),"): Not yet supported."]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}}}]);