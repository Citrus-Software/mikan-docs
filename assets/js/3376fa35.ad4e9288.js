"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[4613],{1970:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"references/mod/expression","title":"expression","description":"Connects multiple plugs using a custom mathematical expression.","source":"@site/docs/references/mod/expression.md","sourceDirName":"references/mod","slug":"/references/mod/expression","permalink":"/mikan-docs/docs/references/mod/expression","draft":false,"unlisted":false,"editUrl":"https://github.com/citrus-software/mikan-docs/tree/main/packages/create-docusaurus/templates/shared/docs/references/mod/expression.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"driver.distance","permalink":"/mikan-docs/docs/references/mod/driver/distance"},"next":{"title":"group","permalink":"/mikan-docs/docs/references/mod/group"}}');var i=s(4848),d=s(8453);const c={},l="expression",t={},o=[{value:"Options",id:"options",level:2},{value:"Syntax",id:"syntax",level:2},{value:"Conditional expressions",id:"conditional-expressions",level:3},{value:"Available Functions",id:"available-functions",level:2},{value:"Scalar functions",id:"scalar-functions",level:3},{value:"Vector functions",id:"vector-functions",level:3},{value:"Examples",id:"examples",level:2}];function x(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"expression",children:"expression"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Connects multiple plugs using a custom mathematical expression."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This modifier allows for advanced control by combining plug values through expressions, offering greater flexibility than standard math operators."}),"\n",(0,i.jsx)(n.p,{children:"It is the preferred way to perform complex logic or vector operations in Mikan."}),"\n",(0,i.jsx)(n.h2,{id:"options",children:"Options"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"op"})})," (",(0,i.jsx)(n.em,{children:"str"}),"): The expression string."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"<[a-z0-9]>"})})," (",(0,i.jsx)(n.em,{children:"plug"}),"): Plug references used as variables within the expression."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"syntax",children:"Syntax"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Assignments use ",(0,i.jsx)(n.code,{children:"="})]}),"\n",(0,i.jsxs)(n.li,{children:["Math operators: ",(0,i.jsx)(n.code,{children:"+"}),", ",(0,i.jsx)(n.code,{children:"-"}),", ",(0,i.jsx)(n.code,{children:"*"}),", ",(0,i.jsx)(n.code,{children:"/"}),", ",(0,i.jsx)(n.code,{children:"^"})," (power), ",(0,i.jsx)(n.code,{children:"%"})," (modulo), parentheses ",(0,i.jsx)(n.code,{children:"()"})]}),"\n",(0,i.jsxs)(n.li,{children:["Logical operators: ",(0,i.jsx)(n.code,{children:"|"})," (or), ",(0,i.jsx)(n.code,{children:"&"})," (and), ",(0,i.jsx)(n.code,{children:"!"})," (not)"]}),"\n",(0,i.jsxs)(n.li,{children:["Booleans: ",(0,i.jsx)(n.code,{children:"true"}),", ",(0,i.jsx)(n.code,{children:"false"}),", or aliases ",(0,i.jsx)(n.code,{children:"on"}),", ",(0,i.jsx)(n.code,{children:"off"})]}),"\n",(0,i.jsxs)(n.li,{children:["Constants: ",(0,i.jsx)(n.code,{children:"e"}),", ",(0,i.jsx)(n.code,{children:"pi"})]}),"\n",(0,i.jsxs)(n.li,{children:["Vectors: ",(0,i.jsx)(n.code,{children:"[x, y, z]"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Access components using ",(0,i.jsx)(n.code,{children:".x"}),", ",(0,i.jsx)(n.code,{children:".y"}),", ",(0,i.jsx)(n.code,{children:".z"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["Keywords:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"frame"}),", ",(0,i.jsx)(n.code,{children:"time"}),": Current frame number"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"flip"}),": Equals ",(0,i.jsx)(n.code,{children:"1"})," by default, ",(0,i.jsx)(n.code,{children:"-1"})," for mirrored branches"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"conditional-expressions",children:"Conditional expressions"}),"\n",(0,i.jsx)(n.p,{children:"Use the ternary syntax:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jade",children:"condition ? true_value : false_value\n"})}),"\n",(0,i.jsx)(n.p,{children:"You can nest conditions with parentheses:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-jade",children:"cond1 ? (cond2 ? val2 : val3) : val1\n"})}),"\n",(0,i.jsx)(n.p,{children:"Works with scalars and vectors alike."}),"\n",(0,i.jsx)(n.h2,{id:"available-functions",children:"Available Functions"}),"\n",(0,i.jsx)(n.h3,{id:"scalar-functions",children:"Scalar functions"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Function"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"inverse(x)"})}),(0,i.jsx)(n.td,{children:"1 / x"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"exp(x)"})}),(0,i.jsx)(n.td,{children:"e^x"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sqrt(x)"})}),(0,i.jsx)(n.td,{children:"Square root"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"clamp(v, min, max)"})}),(0,i.jsx)(n.td,{children:"Limits value within bounds"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"remap(v, min1, max1, min2, max2)"})}),(0,i.jsx)(n.td,{children:"Remaps value from one range to another"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"lerp(v1, v2, w)"})}),(0,i.jsx)(n.td,{children:"Linear interpolation between v1 and v2"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"abs(v)"})}),(0,i.jsx)(n.td,{children:"Absolute value"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"sign(v)"})}),(0,i.jsx)(n.td,{children:"Returns 1, 0 or -1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"min(a, b)"})," / ",(0,i.jsx)(n.code,{children:"max(a, b)"})]}),(0,i.jsx)(n.td,{children:"Min/Max between two values"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"cos(a)"}),", ",(0,i.jsx)(n.code,{children:"sin(a)"}),", ",(0,i.jsx)(n.code,{children:"tan(a)"})]}),(0,i.jsx)(n.td,{children:"Trigonometric functions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"acos(v)"}),", ",(0,i.jsx)(n.code,{children:"asin(v)"}),", ",(0,i.jsx)(n.code,{children:"atan(v)"})]}),(0,i.jsx)(n.td,{children:"Inverse trig functions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"noise(v)"})}),(0,i.jsx)(n.td,{children:"Noise (simplex in Tang, Perlin in Maya)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dnoise(v)"})}),(0,i.jsx)(n.td,{children:"Directional noise [-1, 1]"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"switch(v, a, b, c...)"})}),(0,i.jsx)(n.td,{children:"Enum-style value selection"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsxs)(n.td,{children:[(0,i.jsx)(n.code,{children:"int(v)"})," / ",(0,i.jsx)(n.code,{children:"bool(v)"})]}),(0,i.jsx)(n.td,{children:"Type conversion"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"value(v)"})}),(0,i.jsx)(n.td,{children:"Gets value at build time (won\u2019t update at runtime)"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"vector-functions",children:"Vector functions"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Function"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"len(v)"})}),(0,i.jsx)(n.td,{children:"Vector length"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"distance(v1, v2)"})}),(0,i.jsx)(n.td,{children:"Distance between two points"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"angle(v1, v2)"})}),(0,i.jsx)(n.td,{children:"Angle in degrees between two vectors"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"norm(v)"})}),(0,i.jsx)(n.td,{children:"Normalized vector"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dot(v1, v2)"})}),(0,i.jsx)(n.td,{children:"Dot product"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"cross(v1, v2)"})}),(0,i.jsx)(n.td,{children:"Cross product"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"lerp(v1, v2, w)"})}),(0,i.jsx)(n.td,{children:"Linear interpolation between vectors"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,i.jsx)(n.p,{children:"Squash & Stretch interpolation:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"expression:\n  op: y = lerp(x, 1/sqrt(x), f)\n  y: driven::roots.0@s.x\n  x: driver::skin.0@s.y\n  f: driver::ctrls.0@squash\n"})}),"\n",(0,i.jsx)(n.p,{children:"Using quaternions in expressions:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yml",children:"expression:\n  op: psd = quat([rx, ry, rz], xyz).z\n  psd: arm.L::j.clavicle@qz\n  rx: arm.L::j.clavicle@r.x\n  ry: arm.L::j.clavicle@r.y\n  rz: arm.L::j.clavicle@r.z\n"})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>l});var r=s(6540);const i={},d=r.createContext(i);function c(e){const n=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);