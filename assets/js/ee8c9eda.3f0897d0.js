"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[6449],{994:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/rig_space_look_at-f7d7f664abc6f37dded24c9dd59ddc0d.png"},1151:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/look_at_tpl-660920b7e11e1d15a17adf7f8595f691.png"},1253:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"guides/facial_rig/ui","title":"Animator Interface","description":"Look-at System","source":"@site/docs/guides/11-facial_rig/03-ui.md","sourceDirName":"guides/11-facial_rig","slug":"/guides/facial_rig/ui","permalink":"/mikan-docs/guides/facial_rig/ui","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Adding Modifiers","permalink":"/mikan-docs/guides/facial_rig/modifiers"},"next":{"title":"Facial Poses and UI","permalink":"/mikan-docs/guides/facial_rig/facial_posing"}}');var i=s(4848),t=s(8453);const r={},l="Animator Interface",a={},c=[{value:"Look-at System",id:"look-at-system",level:2},{value:"Constraints",id:"constraints",level:3},{value:"Space switch",id:"space-switch",level:3},{value:"Facial UI",id:"facial-ui",level:2},{value:"Rigger section",id:"rigger-section",level:3},{value:"Animator section",id:"animator-section",level:3},{value:"Connect 2d eyes rig",id:"connect-2d-eyes-rig",level:3}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"animator-interface",children:"Animator Interface"})}),"\n",(0,i.jsx)(n.h2,{id:"look-at-system",children:"Look-at System"}),"\n",(0,i.jsxs)(n.p,{children:["Next, we add a hierarchy to manage the ",(0,i.jsx)(n.strong,{children:"look-at system"})," with:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["an ",(0,i.jsx)(n.strong,{children:"eyes"})," module: core>joints, type transform, skin tag unchecked, placed between the two eyes,"]}),"\n",(0,i.jsxs)(n.li,{children:["a ",(0,i.jsx)(n.strong,{children:"look_at"})," module, identical but placed in front of the face, controlling the gaze direction of both eyes,"]}),"\n",(0,i.jsxs)(n.li,{children:["a ",(0,i.jsx)(n.strong,{children:"look_target"})," module, used to control each eye individually."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"look at template",src:s(1151).A+"",width:"1400",height:"612"})}),"\n",(0,i.jsx)(n.h3,{id:"constraints",children:"Constraints"}),"\n",(0,i.jsxs)(n.p,{children:["We add a ",(0,i.jsx)(n.strong,{children:"constraint"})," modifier to create an aim constraint between eye_ball and look_target."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"[ mod ]\n# -- look at rig\n\nconstraint:\n  type: aim\n  node: eye_ball.L::roots.0\n  targets: look_target.L::ctrls\n  maintain_offset: on\n  flip: on\n  aim: [ 0, 0, 1 ]\n  up: [ 0, 0, 0 ]\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"rig look_at",src:s(4345).A+"",width:"400",height:"479"})}),"\n",(0,i.jsx)(n.h3,{id:"space-switch",children:"Space switch"}),"\n",(0,i.jsxs)(n.p,{children:["We add a ",(0,i.jsx)(n.strong,{children:"space"})," modifier to implement a space switch for the look-at control."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'[ mod ]\nspace:\n  node: look_at::ctrls.0\n  rest_name: eyes\n  targets:\n    - "*::space.world"\n    - "*::space.move"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"rig space look_at",src:s(994).A+"",width:"490",height:"554"})}),"\n",(0,i.jsx)(n.h2,{id:"facial-ui",children:"Facial UI"}),"\n",(0,i.jsxs)(n.p,{children:["To set up the ",(0,i.jsx)(n.strong,{children:"facial interface"})," intended for animators, we start with:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["a ",(0,i.jsx)(n.strong,{children:"face_panel"}),", created using a ",(0,i.jsx)(n.strong,{children:"core>xform"})," module, with the ",(0,i.jsx)(n.strong,{children:"parent = parent"})," option so that the panel group is attached to the face group."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"We then create the rigger section and the animator interface."}),"\n",(0,i.jsx)(n.h3,{id:"rigger-section",children:"Rigger section"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"shp_lids"}),": core>xform module where all blink and eyelid-movement parameters will be stored."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"shp_lips"}),": module for lip-related settings."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"chan_face"}),": centralizes and manages all facial-rig connections, in the spirit of the BCS plugin, by aggregating all attributes onto a single controller."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"shp_face"}),": node on which the facial poses will be recorded."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"animator-section",children:"Animator section"}),"\n",(0,i.jsx)(n.p,{children:"On the animator side, we set up the hierarchy used to build the interface:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"frame_look"}),", a core>xform module providing a 2D interface for eye animation.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["a look ",(0,i.jsx)(n.strong,{children:"core>joints"})," module for the global movement of both eyes,"]}),"\n",(0,i.jsxs)(n.li,{children:["a look_eye ",(0,i.jsx)(n.strong,{children:"core>joints"})," module for the individual movement of each eye,"]}),"\n",(0,i.jsxs)(n.li,{children:["a loc_look ",(0,i.jsx)(n.strong,{children:"core>xform"})," used to collect the movements of both c_look and c_look_eye."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"frame_lipsync"}),", a core>xform module for the 2D mouth-movement interface.","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["a ",(0,i.jsx)(n.strong,{children:"lipsync"})," core>joints module to handle mouth opening."]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"face_up"}),", a core>joints module grouping all upper-face poses (eyes, eyebrows)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"face_dn"}),", a core>joints module grouping all lower-face poses (mouth, teeth, cheeks)."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"tpl dace UI",src:s(5949).A+"",width:"1291",height:"595"})}),"\n",(0,i.jsx)(n.h3,{id:"connect-2d-eyes-rig",children:"Connect 2d eyes rig"}),"\n",(0,i.jsxs)(n.p,{children:["Now let's create the 2D eye rig.\nWe connect the ",(0,i.jsx)(n.strong,{children:"frame_look"})," (look + look_eye) interface to the eyes, and add two attributes: ",(0,i.jsx)(n.strong,{children:"cross"})," and ",(0,i.jsx)(n.strong,{children:"dizzy"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"We create a helper on look, add a plug, then drive modifiers."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"[ mod ]\n# -- 2d eyes rig\n\nplug:\n  t.x: { min: -1, max: 1 }\n  t.y: { min: -1, max: 1 }\n  t.z: { l: on, k: off }\n  r: { k: off, l: on }\n  s: { k: off, l: on }\n  cross: { k: on }\n  dizzy: { k: on }\n\ndrive:\n  plug: look::ctrls.0@cross\n  eye_ball.L::poses.0:\n    r.y: { 0: 0, -1: $amp_ry }\n  eye_ball.R::poses.0:\n    r.y: { 0: 0, -1: $amp_ry }\n\ndrive:\n  plug: look::ctrls.0@dizzy\n  eye.L::poses.0:\n    r.z: { 0: 0, -1: 30 }\n  eye.R::poses.0:\n    r.z: { 0: 0, 1: 30 }\n\n\ndrive:\n  plug: loc_look.L::node@t.x\n  driven:\n    eye_ball.L::poses.0:\n      r.y: { 0: 0, 1: $amp_ry }\ndrive:\n  plug: loc_look.R::node@t.x\n  driven:\n    eye_ball.R::poses.0:\n      r.y: { 0: 0, -1: $amp_ry }\n\ndrive:\n  plug: loc_look.L::node@t.y\n  driven:\n    eye_ball.L::poses.0:\n      r.x: { 0: 0, -1: $amp_rx }\ndrive:\n  plug: loc_look.R::node@t.y\n  driven:\n    eye_ball.R::poses.0:\n      r.x: { 0: 0, -1: $amp_rx }\n\n  [ mod ]\n#!~dev, ~debug\n#!-10\nplug:\n  cross: $cross\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you look at the notes, you will see the introduction of ",(0,i.jsx)(n.strong,{children:"gem_var variables"}),", which we will set as follows:"]}),"\n",(0,i.jsx)(n.p,{children:"gem_var_amp_Rx : 30\ngem_var_amp_Ry : 30\ngem_cross_var : 0.15"}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["You do not need to manually create ",(0,i.jsx)(n.code,{children:"gem_var"})," attributes. Mikan automatically generates missing ones using the proper naming convention during the build process."]})}),"\n",(0,i.jsxs)(n.p,{children:["And we add a ",(0,i.jsx)(n.strong,{children:"constraint"})," modifier on ",(0,i.jsx)(n.strong,{children:"loc_look"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"[ mod ]\nconstraint:\n  type: point\n  node: loc_look.L::node\n  target: look_eye.L::ctrls.0\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},4345:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/rig_look_at-415df47ddc93fa9338ce76309094013c.png"},5949:(e,n,s)=>{s.d(n,{A:()=>o});const o=s.p+"assets/images/faceUI_tpl-136070daf89660d5aa3539040cb38c54.png"},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>l});var o=s(6540);const i={},t=o.createContext(i);function r(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(t.Provider,{value:n},e.children)}}}]);