"use strict";(self.webpackChunkdocusaurus=self.webpackChunkdocusaurus||[]).push([[9719],{1608:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/create_shape-a7c8ace0b7937f734f60cd65461c1585.png"},3823:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/shapes_liste-45f0034c6abc89de3f30d590756b9c63.png"},4896:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/save_pose-081e4708fd7e109e88bb23447843120c.png"},5624:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/save_mods-3afe71e805ec4956dc4d75712f85fb78.png"},7916:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"guides/facial_rig/facial_posing","title":"Facial Poses and UI","description":"Creating Poses on shp_face","source":"@site/docs/guides/11-facial_rig/05-facial_posing.md","sourceDirName":"guides/11-facial_rig","slug":"/guides/facial_rig/facial_posing","permalink":"/mikan-docs/guides/facial_rig/facial_posing","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Animator Interface","permalink":"/mikan-docs/guides/facial_rig/ui"},"next":{"title":"Third-party dependencies and custom patches","permalink":"/mikan-docs/developer/vendor"}}');var t=s(4848),o=s(8453);const r={},a="Facial Poses and UI",c={},d=[{value:"Creating Poses on <em>shp_face</em>",id:"creating-poses-on-shp_face",level:2},{value:"Creating the Pose Channels",id:"creating-the-pose-channels",level:2},{value:"Method 1: Creating Poses Through the Posing Tab",id:"method-1-creating-poses-through-the-posing-tab",level:3},{value:"Method 2: Creating Poses Using a Modifier Plug",id:"method-2-creating-poses-using-a-modifier-plug",level:3},{value:"Creating Poses on the Channels",id:"creating-poses-on-the-channels",level:2},{value:"Procedure to Record a Pose",id:"procedure-to-record-a-pose",level:2},{value:"Saving to the Template",id:"saving-to-the-template",level:2},{value:"Connecting the Poses to the Face UI",id:"connecting-the-poses-to-the-face-ui",level:2},{value:"Connecting the Poses to <em>c_lipsync</em>",id:"connecting-the-poses-to-c_lipsync",level:2}];function h(e){const n={admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"facial-poses-and-ui",children:"Facial Poses and UI"})}),"\n",(0,t.jsxs)(n.h2,{id:"creating-poses-on-shp_face",children:["Creating Poses on ",(0,t.jsx)(n.em,{children:"shp_face"})]}),"\n",(0,t.jsx)(n.p,{children:"Now that the hierarchy is in place and the modifiers have been added to introduce the necessary logic into the rig's behavior, we can move on to setting up the facial poses."}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"Before anything else, check the facial module options to ensure that the pose nodes have been properly created in the rig hierarchy."})}),"\n",(0,t.jsxs)(n.p,{children:["All operations related to poses will be done in Mikan's ",(0,t.jsx)(n.strong,{children:"Posing"})," tab.",(0,t.jsx)(n.br,{}),"\n","Select the ",(0,t.jsx)(n.strong,{children:"shp_face"})," module, then click ",(0,t.jsx)(n.strong,{children:"Group"})," and ",(0,t.jsx)(n.strong,{children:"Driver"}),"."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"posing tab",src:s(7944).A+"",width:"1400",height:"752"})}),"\n",(0,t.jsx)(n.h2,{id:"creating-the-pose-channels",children:"Creating the Pose Channels"}),"\n",(0,t.jsx)(n.p,{children:"We can now begin creating the poses."}),"\n",(0,t.jsx)(n.p,{children:"Two methods are available:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["use the ",(0,t.jsx)(n.strong,{children:"Posing"})," tab to create the poses directly;"]}),"\n",(0,t.jsxs)(n.li,{children:["or edit a ",(0,t.jsx)(n.strong,{children:"modifier plug"})," on a node, where you list all the poses you want to create."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"method-1-creating-poses-through-the-posing-tab",children:"Method 1: Creating Poses Through the Posing Tab"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["In the ",(0,t.jsx)(n.strong,{children:"Pose Editor"})," window, right-click under the pose editing buttons to create a pose.",(0,t.jsx)(n.br,{}),"\n","Example: ",(0,t.jsx)(n.em,{children:"open mouth"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"create shape",src:s(1608).A+"",width:"500",height:"240"})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Repeat this operation for all the poses you want to add."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"shapes list",src:s(3823).A+"",width:"400",height:"466"})}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:["When finished, click ",(0,t.jsx)(n.strong,{children:"Save Mods"})," in the Posing tab to generate the corresponding note on the ",(0,t.jsx)(n.em,{children:"shp_face"})," node."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"save mods",src:s(5624).A+"",width:"454",height:"238"})}),"\n",(0,t.jsx)(n.h3,{id:"method-2-creating-poses-using-a-modifier-plug",children:"Method 2: Creating Poses Using a Modifier Plug"}),"\n",(0,t.jsxs)(n.p,{children:["Create a helper node on ",(0,t.jsx)(n.em,{children:"shp_face"})," and add a ",(0,t.jsx)(n.strong,{children:"modifier plug"}),", where you will write the full list of poses to generate."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"pose notes",src:s(8033).A+"",width:"400",height:"587"})}),"\n",(0,t.jsx)(n.h2,{id:"creating-poses-on-the-channels",children:"Creating Poses on the Channels"}),"\n",(0,t.jsx)(n.p,{children:"Once all the channels are created, you can record the poses."}),"\n",(0,t.jsxs)(n.p,{children:["It is recommended to create ",(0,t.jsx)(n.strong,{children:"pose shelves"})," in order to:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"test the poses,"}),"\n",(0,t.jsx)(n.li,{children:"flip and mirror them,"}),"\n",(0,t.jsx)(n.li,{children:"and check combinations (e.g., Left/Right)."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"This makes pose editing much smoother."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"shelves poses",src:s(7969).A+"",width:"391",height:"363"})}),"\n",(0,t.jsx)(n.h2,{id:"procedure-to-record-a-pose",children:"Procedure to Record a Pose"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Activate the pose"})," by clicking the corresponding shelf."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Select the channel"})," in the Pose Editor."]}),"\n",(0,t.jsxs)(n.li,{children:["Click ",(0,t.jsx)(n.strong,{children:"Save"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"save pose",src:s(4896).A+"",width:"1400",height:"519"})}),"\n",(0,t.jsx)(n.h2,{id:"saving-to-the-template",children:"Saving to the Template"}),"\n",(0,t.jsxs)(n.p,{children:["After recording all the poses, make sure to click ",(0,t.jsx)(n.strong,{children:"Save Mods"})," so the drives edited in the Pose Editor are saved into the template."]}),"\n",(0,t.jsx)(n.p,{children:"If you skip this step, you will lose your poses during the next rebuild."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.img,{alt:"save mods2",src:s(8290).A+"",width:"482",height:"474"})}),"\n",(0,t.jsx)(n.h2,{id:"connecting-the-poses-to-the-face-ui",children:"Connecting the Poses to the Face UI"}),"\n",(0,t.jsxs)(n.p,{children:["To connect the facial poses to the Face UI, create a helper node on ",(0,t.jsx)(n.strong,{children:"chan_face"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["On this node, create a ",(0,t.jsx)(n.strong,{children:"shape.channel"})," modifier.",(0,t.jsx)(n.br,{}),"\n","Assign a negative priority to ensure that the connections occur after the pose setup."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"[mod]\n# -- channel shapes\n#!-100\n\nshape.channel:\n node: chan_face::node\n sources:\n  - shp_face::node\n target: face_dn::ctrls.0\n\n shapes:\n  - mouth:\n     sep: on\n  - m_open:\n     driven:\n       m_open: 1\n       m_close: -1\n     min: -1\n     max: 2\n  - m_stretch:\n     div: [L, R]\n     min: -2\n     max: 2\n     driven:\n       m_wide: 1\n       m_narrow: -1\n  - m_emote:\n     div: [L, R]\n     min: -2\n     max: 2\n     driven:\n       m_smile: 1\n       m_frown: -1\n\n  - teeth:\n     sep: on\n  - t_roll_up\n  - t_roll_dn\n  - t_emote:\n     div: [L, R]\n  - t_stretch:\n     div: [L, R]\n  - t_shear:\n     div: [L, R]\n\n combo:\n   m_wd_sm:\n    drivers:\n      m_wide: 1\n      m_smile: 1\n    div: [L, R]\n   m_nw_sm:\n    drivers:\n      m_narrow: 1\n      m_smile: 1\n    div: [L, R]\n   m_wd_fn:\n    drivers:\n      m_wide: 1\n      m_frown: 1\n    div: [L, R]\n   m_nw_fn:\n    drivers:\n      m_narrow: 1\n      m_frown: 1\n    div: [L, R]\n\nshape.channel:\n sources:\n  - shp_face::node\n target: face_up::ctrls.0\n\n shapes:\n  - e_stretch:\n     div: [L, R]\n     min: -2\n     max: 2\n\n  - eyebrows:\n     sep: on\n  - eb_in:\n     div: [L, R]\n     driven:\n       eb_up_in: -1\n       eb_dn_in: 1\n     min: -3\n     max: 3\n  - eb_out:\n     div: [L, R]\n     driven:\n       eb_up_out: -1\n       eb_dn_out: 1\n     min: -2\n     max: 2\n  - eb_squeeze:\n     div: [L, R]\n     min: 0\n     max: 2\n  - eb_bend:\n     div: [L, R]\n     min: -2\n     max: 2\n\n\n  - eyelids:\n     sep: on\n  - el_blink:\n     div: [L, R]\n     min: -0.2\n     max: 1\n     clamp: on\n  - el_roll_up:\n     div: [L, R]\n     min: -0.5\n     max: 1.5\n  - el_roll_dn:\n     div: [L, R]\n     min: -0.5\n     max: 1.5\n\n combo:\n   eb_sqz_dn:\n    drivers:\n      eb_squeeze: 1\n      eb_dn_in: 1\n    div: [L, R]    \n"})}),"\n",(0,t.jsxs)(n.h2,{id:"connecting-the-poses-to-c_lipsync",children:["Connecting the Poses to ",(0,t.jsx)(n.em,{children:"c_lipsync"})]}),"\n",(0,t.jsxs)(n.p,{children:["On the ",(0,t.jsx)(n.strong,{children:"lipsync"})," node, set up the drives that connect the facial poses to ",(0,t.jsx)(n.em,{children:"c_lipsync"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",children:"[mod]\n#!-100\ndrive:\n  node: lipsync::ctrls.0@t.x\n  chan_face::node:\n    m_stretch_L: {-1: -1, 0: 0, 1: 1}\n    m_stretch_R: {-1: -1, 0: 0, 1: 1}\n\ndrive:\n  node: lipsync::ctrls.0@t.y\n  chan_face::node:\n    m_open: {-1: 1, 0: 0}\n"})})]})}function l(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},7944:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/shp_face-872587499e1496a4839ee2d4a4c3116e.png"},7969:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/shelves-710ff078a18666c8ca81f19151f832c3.png"},8033:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/notes_poses-0e08766f53cdac7f629bf09bc29dee9f.png"},8290:(e,n,s)=>{s.d(n,{A:()=>i});const i=s.p+"assets/images/save_mods02-96fc883e59e8665eac3a92418918e224.png"},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>a});var i=s(6540);const t={},o=i.createContext(t);function r(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);